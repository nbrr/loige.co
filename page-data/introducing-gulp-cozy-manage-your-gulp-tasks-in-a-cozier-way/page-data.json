{"componentChunkName":"component---src-templates-blog-post-js","path":"/introducing-gulp-cozy-manage-your-gulp-tasks-in-a-cozier-way/","result":{"data":{"site":{"siteMetadata":{"title":"Luciano Mammino \"Loige\" - Cloud developer, entrepreneur, fighter, butterfly maker!","author":"Luciano Mammino","siteUrl":"https://loige.co","twitterProfile":"loige","disqusShortName":"loige"}},"markdownRemark":{"id":"8d8fc0a4-2f6e-56fc-acc1-e87d7b3edf2a","fileAbsolutePath":"/home/circleci/loige.co/content/posts/2016-01-18_introducing-gulp-cozy-manage-your-gulp-tasks-in-a-cozier-way/index.md","excerpt":"Gulp-cozy is an experimental NPM package that allows you to organize your Gulp tasks in a more modular way with simplicity and “cozyness” in…","timeToRead":4,"headings":[{"value":"Rationale","depth":2},{"value":"Installation and usage","depth":2},{"value":"Long way to perfection","depth":2},{"value":"Contributing","depth":2},{"value":"Conclusion","depth":2}],"html":"<p><a href=\"https://www.npmjs.com/package/gulp-cozy\">Gulp-cozy</a> is an experimental NPM package that allows you to organize your Gulp tasks in a more modular way with simplicity and <em>“cozyness”</em> in mind.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 125.390625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wgARCAAZABQDASIAAhEBAxEB/8QAGQAAAwADAAAAAAAAAAAAAAAAAAQFAgMG/8QAFwEBAQEBAAAAAAAAAAAAAAAAAQIAA//aAAwDAQACEAMQAAABlbJTkdZpgM2GG3McaOA//8QAHBAAAgICAwAAAAAAAAAAAAAAAwQBAgATMTIz/9oACAEBAAEFAkjGIZl64CS0YmBJobdUPsLUcWOpLDZUS2klJ2qdo4v6f//EABcRAAMBAAAAAAAAAAAAAAAAAAEgITH/2gAIAQMBAT8BhxP/xAAVEQEBAAAAAAAAAAAAAAAAAAAgQf/aAAgBAgEBPwGj/8QAIhAAAgIBBAEFAAAAAAAAAAAAAQIAEQMSITFBIhNRYXGB/9oACAEBAAY/Aipa1UbX1HTSu/zxLZ7MsbeVG4+R0FAXzB6Oqq31dGZmwsCt33MQGUNpXy5j17ww/sb7n//EAB4QAQACAgIDAQAAAAAAAAAAAAEAESExUaFBgbFx/9oACAEBAAE/Ibj9AwMoNGrYjYQthjRLOwCDhcpcESXxwPmXYtKN/ITaNhStdhROJTiinr1GXD9TsvydT7nZz//aAAwDAQACAAMAAAAQ0ziB/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAEhEcH/2gAIAQMBAT8QaU8XhBxwxH//xAAYEQEAAwEAAAAAAAAAAAAAAAABABEhEP/aAAgBAgEBPxC005w0g0VP/8QAHxABAQACAgMAAwAAAAAAAAAAAREAITFBUWFxEIHw/9oACAEBAAE/EAyMBGIBobet3nHLlwDafHdclaEMtc9HtyilnLdSOuoP6xAk0JGa7ACs85YbMJ3CgAmifc1K91CWgqNvpyqaihQ4DTiUyzeM4CxKEYUSefyAB/A85//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/574ebc78d23d851ccc49f6ac1d6c5be1/8d3d1/gulp-cozy-i-dont-always-loige-luciano-mammino.webp 256w,\n/static/574ebc78d23d851ccc49f6ac1d6c5be1/4be29/gulp-cozy-i-dont-always-loige-luciano-mammino.webp 500w\"\n          sizes=\"(max-width: 500px) 100vw, 500px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/574ebc78d23d851ccc49f6ac1d6c5be1/b95e4/gulp-cozy-i-dont-always-loige-luciano-mammino.jpg 256w,\n/static/574ebc78d23d851ccc49f6ac1d6c5be1/d1f95/gulp-cozy-i-dont-always-loige-luciano-mammino.jpg 500w\"\n          sizes=\"(max-width: 500px) 100vw, 500px\"\n          type=\"image/jpeg\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/574ebc78d23d851ccc49f6ac1d6c5be1/d1f95/gulp-cozy-i-dont-always-loige-luciano-mammino.jpg\"\n          alt=\"I don&#39;t always modularize my gulp tasks, but when I do it must be cozy!\"\n          title=\"I don&#39;t always modularize my gulp tasks, but when I do it must be cozy!\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n    </span></p>\n<h2 id=\"rationale\" style=\"position:relative;\"><a href=\"#rationale\" aria-label=\"rationale permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rationale</h2>\n<p>Ever found yourself digging into a gigantic monstrous <code>Gulpfile</code> with hundreds\nof functions and tasks scattered all around? If it happened to you I am sure you can tell that it’s not a great feeling…</p>\n<p>That’s the reason why I created this small module as an attempt to help with keeping yourself cozier (and happier!) when working with Gulp.\nIn a way it tries to bring a bit of the <em>Node philosophy</em> (also known as ”<a href=\"http://thenodeway.io/\">The Node way</a>”) into your Gulpfile.</p>\n<p><em>Gulp-cozy</em> in fact offers a very easy way (read: <em>very-very-very-easy!</em>) to separate all your Gulp tasks into small modules organized inside a dedicated folder. Gulp-cozy will take care to load all the modules and to register them as Gulp tasks. With this approach you will end up with several small modules that serve one specific purpose (a task), which in turn result easier to maintain and to reason about.</p>\n<h2 id=\"installation-and-usage\" style=\"position:relative;\"><a href=\"#installation-and-usage\" aria-label=\"installation and usage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Installation and usage</h2>\n<p>Enough talking, let’s jump to the practice! As most of the NPM packages to install <code>gulp-cozy</code> you just need to run the following command inside your project folder:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev gulp-cozy</code></pre></div>\n<p>Of course I am assuming you have already installed <code>Gulp</code> globally and as local dev dependency for your project.</p>\n<p>Once NPM finished downloading (it should be fast, the module is pretty small!) you can turn you <code>Gulpfile.js</code> into this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">#Gulpfile<span class=\"token punctuation\">.</span>js\n\n<span class=\"token keyword\">var</span> gulp <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gulp'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> cozy <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gulp-cozy'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">cozy</span><span class=\"token punctuation\">(</span>gulp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>YES! This will be the only content of your Gulpfile…\nSo you might ask <em>“where do all the tasks logic go?”</em></p>\n<p>The idea is to keep all the tasks inside a <code>gulp</code> folder in your main project folder (doesn’t it make you think to the <code>node_modules</code> folder approach?!). Every task is a file which name will represent the name of the gulp task.</p>\n<p>Don’t worry too much for now, let’s just create this new <code>gulp</code> folder and everything will be cleaner in a moment with a more practical example.</p>\n<p>Let’s assume we want to create a new task to build the css files for our new project. For this sake we can add the <code>build-css</code> task by creating the <code>build-css.js</code> file as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">#gulp<span class=\"token operator\">/</span>build<span class=\"token operator\">-</span>css<span class=\"token punctuation\">.</span>js\n\n<span class=\"token keyword\">var</span> concat <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gulp-concat'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> minifyCss <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gulp-minify-css'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">gulp</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> gulp<span class=\"token punctuation\">.</span><span class=\"token function\">src</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n      <span class=\"token string\">'./node_modules/bootstrap/dist/css/bootstrap.css'</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span><span class=\"token string\">'all.css'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">minifyCss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>compatibility<span class=\"token operator\">:</span> <span class=\"token string\">'ie8'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>gulp<span class=\"token punctuation\">.</span><span class=\"token function\">dest</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./assets/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Notice that the module exports a function that receives the current instance of Gulp as argument. This function is a factory for the real Gulp task logic so it should return a function which, will be executed when calling the <code>build-css</code> task with:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">gulp build-css</code></pre></div>\n<p>You can also create a module to call a series tasks as in the following\nexample.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">#gulp<span class=\"token operator\">/</span>build<span class=\"token punctuation\">.</span>js\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'clean'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'build-css'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'build-js'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'compress'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'upload'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In this case, rather than using a factory function, the module needs to export just a plain array containing the names of the tasks to be invoked. You can launch this new task with:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">gulp build</code></pre></div>\n<p>What do you think? Doesn’t it make things more separated, organised and most importantly “cozy”?</p>\n<h2 id=\"long-way-to-perfection\" style=\"position:relative;\"><a href=\"#long-way-to-perfection\" aria-label=\"long way to perfection permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Long way to perfection</h2>\n<p>As I told in the very first line this approach has to be considered <strong>experimental</strong> for now and there are still many concerns that I have about it.</p>\n<p>First of all the module tries to expose a very small surface and to do one simple thing. That’s generally good and it sticks to the node philosophy. But at the same time it’s probably not very flexible.</p>\n<p>Would be great to have a way to define generic task templates, like for example processing CSS files (compile from sass, concatenate and minify) and than have a configurable way to use this template with different sets of files and producing different assets.</p>\n<p>At the moment you could do this by creating a generic configurable module outside your <code>gulp</code> folder and than require it and use it inside one or more tasks in the new folder. This approach should work without big efforts but doesn’t feel very right to me at the moment.</p>\n<p>Probably the module should expose more functions to deal with more complex case, but it boils down to the eternal struggle between “keeping things simple” and “making the new jack-of-all-trades module”…</p>\n<h2 id=\"contributing\" style=\"position:relative;\"><a href=\"#contributing\" aria-label=\"contributing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Contributing</h2>\n<p>If you want to contribute to this project you can find the sources on <a href=\"https://github.com/lmammino/gulp-cozy\">GitHub</a> (of course!). If this project is interesting to you you are very welcome to contribute by submitting a pull request or simply by <a href=\"https://github.com/lmammino/gulp-cozy/issues\">opening an issue</a>.</p>\n<p>If you decide to go with the pull request, please take care to maintain the existing coding style and add unit tests for any new or changed functionality.\nThe project is currently using <a href=\"https://github.com/sindresorhus/xo\">XO</a> for styleguide and style checks run with the regular test suite.</p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>I am really curious to see if this topic and this library can be of any interest for other people. I’d like to know if you ever questioned yourself to find better solutions to organize your Gulp tasks and if you came out with some kind of personal solution. I would be very happy to see some comments down this article, maybe a nice discussion might born from this.</p>\n<p>Before leaving you I have to thank my dearest friend <a href=\"https://www.linkedin.com/in/manganoandrea\">Andrea</a> for discussing these topics and give me the inspiration to spend some time on this subject.</p>\n<p>Until next time! :)</p>","frontmatter":{"title":"Introducing Gulp cozy - Manage your gulp tasks in a cozier way","meta_description":null,"slug":"introducing-gulp-cozy-manage-your-gulp-tasks-in-a-cozier-way","author":"Luciano Mammino","tags":["gulp","javascript","node-js","library"],"date":"January 18, 2016","dateISO":"2016-01-18T23:27:40.000Z","header_img":{"publicURL":"/static/789f6253df634fd764a674d28a284ee3/meerkat-459171_1920.jpg"},"fb_img":{"publicURL":"/static/0db5e0fd1e3be6f195f57b6278d3b2b0/introducing-gulp-cozy-manage-your-gulp-tasks-in-a-cozier-way-fb.png"},"tw_img":{"publicURL":"/static/acc2d2e7a4fbc762388b472341faf04c/introducing-gulp-cozy-manage-your-gulp-tasks-in-a-cozier-way-tw.png"}}}},"pageContext":{"tags":["gulp","javascript","node-js","library"],"slug":"introducing-gulp-cozy-manage-your-gulp-tasks-in-a-cozier-way","previous":{"timeToRead":7,"excerpt":"In this post I will explain you how to use Gulp to interact with the files on your server through FTP. You will learn how to watch the files you are editing on your local machine and automatically synchronize them with your server as they change and how to setup a task to launch an FTP deploy on demand. Premise Few days ago I was assigned to take care of updating few sections on a legacy website which development environment is currently accessible only through FTP. So no local virtualized development…","fields":{"slug":"gulp-and-ftp-update-a-website-on-the-fly"},"frontmatter":{"date":"25 October, 2015","title":"Gulp and FTP: update a website \"on the fly\"","tags":["gulp","javascript","ftp","server"],"header_img":{"publicURL":"/static/0289aa15c192504a21a1d087e8240b71/gulp-and-ftp-update-a-website-on-the-fly-1.png"}}},"next":{"timeToRead":4,"excerpt":"Axosoft is currently working on GitKraken an innovative multi-platform graphical client for git which is already available for Windows, Linux and Mac OSX in private beta version. The private beta is accessible through an invite code.\nI was lucky to get an invite for me and I have some extra invites that I am willing to share with the first people who is going to leave a comment on this post. UPDATE 2016-01-19 22:00 GMT: I finished all the invites in less than 1 hour! That’s incredible :O Sorry for whoever…","fields":{"slug":"get-an-invitation-for-gitkraken"},"frontmatter":{"date":"19 January, 2016","title":"Get an invitation for GitKraken","tags":["git","github"],"header_img":{"publicURL":"/static/80beb8f4a5437b31dcddd18cfc95864c/get-an-invitation-for-gitkraken-loige-co-luciano-mammino.png"}}},"similar":[{"slug":"unshorten-expand-short-urls-with-node-js","title":"Unshorten (expand) short URLs with Node.js","publishedAt":"31 March, 2017","score":3},{"slug":"middy-1-is-here","title":"Middy 1.0.0 is here","publishedAt":"26 April, 2020","score":2},{"slug":"lean-npm-packages","title":"Lean NPM packages","publishedAt":"08 September, 2019","score":2},{"slug":"fastify-and-preact-for-quick-web-app-prototyping","title":"Fastify and Preact for quick web app prototyping","publishedAt":"18 February, 2019","score":2},{"slug":"javascript-iterator-patterns","title":"JavaScript iterator patterns","publishedAt":"21 January, 2019","score":2}]}},"staticQueryHashes":[]}