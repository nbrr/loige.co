{"componentChunkName":"component---src-templates-blog-post-share-image-js","path":"/whats-in-a-jwt/image_fb","result":{"data":{"site":{"siteMetadata":{"title":"Luciano Mammino \"Loige\" - Cloud developer, entrepreneur, fighter, butterfly maker!","author":"Luciano Mammino","siteUrl":"https://loige.co","twitterProfile":"loige","disqusShortName":"loige"}},"markdownRemark":{"id":"d27fef6d-441f-5993-8023-62d88fbb7505","timeToRead":4,"headings":[{"value":"It‚Äôs just a string with a well-defined format","depth":2},{"value":"When are JWTs useful","depth":2},{"value":"Now you can be nosy","depth":2},{"value":"Closing notes","depth":2}],"html":"<p>If you ended up on this article, chances are that you have been seeing JWTs (Json Web Tokens) for a while and you are curious to find out what they really are, what‚Äôs inside of them and how they actually work! Why did they get so mainstream anyway?! ü§î</p>\n<p>In this article we will be trying to address this topic in a short but (hopefully) effective fashion!</p>\n<h2 id=\"its-just-a-string-with-a-well-defined-format\" style=\"position:relative;\"><a href=\"#its-just-a-string-with-a-well-defined-format\" aria-label=\"its just a string with a well defined format permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>It‚Äôs just a string with a well-defined format</h2>\n<p>JWT stands for <em>JSON Web Token</em> and such a token is just a string composed by 3 parts:</p>\n<ul>\n<li>a <strong>header</strong></li>\n<li>a <strong>body</strong> (sometimes also referred to as <strong>payload</strong>)</li>\n<li>a cryptographic <strong>signature</strong>.</li>\n</ul>\n<p>Let‚Äôs have a look at a more concrete example, a JWT looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJoZWxsbyI6ImZyb20gSldUIn0.XoByFQCJvii_iOTO4xlz23zXmb4yuzC3gqrWNt3EHrg</code></pre></div>\n<p>The three parts are separated by a <code>.</code> (dot) character:</p>\n<ul>\n<li>header: <code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9</code></li>\n<li>body: <code>eyJoZWxsbyI6ImZyb20gSldUIn0</code></li>\n<li>signature: <code>XoByFQCJvii_iOTO4xlz23zXmb4yuzC3gqrWNt3EHrg</code></li>\n</ul>\n<p>Header and Body are JSON strings (yeah, that‚Äôs why the are called <em>JSON</em> web tokens‚Ä¶). This is somewhat hidden, because those two strings are encoded using the <a href=\"https://tools.ietf.org/html/rfc4648#section-5\">Base64Url</a> algorithm (a URL-safe variation of the standard Base64 encoding algorithm).</p>\n<p>If we decode them this is what we get:</p>\n<ul>\n<li>header: <code>{ \"alg\": \"HS256\", \"typ\": \"JWT\" }</code></li>\n<li>body: <code>{ \"hello\": \"from JWT\" }</code></li>\n</ul>\n<p>Which now looks like proper JSON!</p>\n<p>The signature part contains raw bytes which represent a cryptographic signature of header and body. The signature is also encoded using Base64Url and it can be used to verify the authenticity of a token.</p>\n<p>If you try to decode the signature and visualize it a s UTF-8 string you will probably see some rubbish like this:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 789px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 14.453125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsSAAALEgHS3X78AAAAgUlEQVQI1yWNyw7CIBBF+f+9xn+wsTu7GRf0oVH/gL1dlybQEqbgZTiE4WQyl1E5Z2ZOKe1gKyzWogPZBe893DkHQYVH5iwo3BCCXddxHAp9fzpfjDHdvfu8v6/peWtbInoQXQuN1vo3z0hhn6p/wA4h4fCBzTHG2mQBLm8ZATX1BxHMpdESMlwKAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/4b3979a64258f7998823b9a575110b43/8d3d1/jwt-signature-decoded-to-string.webp 256w,\n/static/4b3979a64258f7998823b9a575110b43/354cf/jwt-signature-decoded-to-string.webp 512w,\n/static/4b3979a64258f7998823b9a575110b43/b314b/jwt-signature-decoded-to-string.webp 789w\"\n          sizes=\"(max-width: 789px) 100vw, 789px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/4b3979a64258f7998823b9a575110b43/85b06/jwt-signature-decoded-to-string.png 256w,\n/static/4b3979a64258f7998823b9a575110b43/bc282/jwt-signature-decoded-to-string.png 512w,\n/static/4b3979a64258f7998823b9a575110b43/448f2/jwt-signature-decoded-to-string.png 789w\"\n          sizes=\"(max-width: 789px) 100vw, 789px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/4b3979a64258f7998823b9a575110b43/448f2/jwt-signature-decoded-to-string.png\"\n          alt=\"An attempt to try to decode a JWT signature to a UTF-8 string\"\n          title=\"An attempt to try to decode a JWT signature to a UTF-8 string\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n    </span></p>\n<p>Again, this is because the signature just contains raw bytes which do not represent a valid UTF-8 string. So yeah, there is no point in trying to decode and visualize a signature. ü§ó</p>\n<h2 id=\"when-are-jwts-useful\" style=\"position:relative;\"><a href=\"#when-are-jwts-useful\" aria-label=\"when are jwts useful permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>When are JWTs useful</h2>\n<p>JWTs are mostly used as a mechanism for ‚Äústateless‚Äù claims exchange. We can define a claim as some piece of information that we want to certify and propagate through various systems. </p>\n<p>A good example is authentication and authorization, were our claims could be information about the user session (user id, roles, etc). Let‚Äôs try to discuss this example with a (rather crappy) illustration:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.96875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABNUlEQVQoz3VRi07EIBDk/3/CxPgVxvgPaoynZ3rXXp+0vStQWKDLIj01uRhvMiGQ3WGGhcV/gT4GT1ZSjCsXIHSRwsozvPdCCGatVfOstQEAYyCEtUzoyZvotQOF3pJTAQRZRb/i1Jb07DRN+6Io63qf513H0x0RXXCanAQtNpvnIt+GJeklWUF+Pkf5Abt/eGw7fpymfhh5P4B132Wj564pXt/fen5QYkQkxCWG5fJx7PbmbrfbW+cQ0ZyR8jjvO947a1NAIcxHdvrMTdXaeOmbxBXv8YyyLJu2Teac97ssa9oGVnHEQGkUBtD58GesbASbmgJRXZWQvejtE+Qbxw/QFuY4jMNARPEKGFc6ZU47B6DaUveNaA6K13PfyLRKGa+DVV0npfo+JItwQaSrrulfp2n6AqNEB5LuPwgRAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/6eb61dea272265fdc80f2818256e429f/8d3d1/jwt-auth-part-1-loige.webp 256w,\n/static/6eb61dea272265fdc80f2818256e429f/354cf/jwt-auth-part-1-loige.webp 512w,\n/static/6eb61dea272265fdc80f2818256e429f/44907/jwt-auth-part-1-loige.webp 1024w,\n/static/6eb61dea272265fdc80f2818256e429f/8cac3/jwt-auth-part-1-loige.webp 1349w\"\n          sizes=\"(max-width: 1024px) 100vw, 1024px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/6eb61dea272265fdc80f2818256e429f/85b06/jwt-auth-part-1-loige.png 256w,\n/static/6eb61dea272265fdc80f2818256e429f/bc282/jwt-auth-part-1-loige.png 512w,\n/static/6eb61dea272265fdc80f2818256e429f/f1720/jwt-auth-part-1-loige.png 1024w,\n/static/6eb61dea272265fdc80f2818256e429f/25966/jwt-auth-part-1-loige.png 1349w\"\n          sizes=\"(max-width: 1024px) 100vw, 1024px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/6eb61dea272265fdc80f2818256e429f/f1720/jwt-auth-part-1-loige.png\"\n          alt=\"John authenticating against an Auth server and getting back a JWT\"\n          title=\"John authenticating against an Auth server and getting back a JWT\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.828125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABrElEQVQoz21S7W6jMBDk/d+jP/oSp6t6laJWqdQm7YVrescBCdgYMDaEL8PcGiU50tbSCNu7O96dwRnHEV8tez+Pzc+HuoJWArUWqIr9hLYp0XUdnHnBx/1EMgyXsa6GlD688Bkq2ULyLZR4h6kiKFXAkUUBxhPwJME+iggx0jRDzDgEfW2cJwJRzNC2DSLmQsQbBMEasf8CvtsgjVy0KkBPjzm2OMtyKK2hyxIFEaRZhoQzpAQex9gFPuVkRNhCaw62+4Vk50JnHvoyJAQwhKZK/4/8/eYWV1fXU2EiBGTwG/l2jfzvG2To4aAVjBmwDwO8v/0EZ3uUWqLSKUyr0B4kxXs4A2lk12LxgOX9curCruGonYU55vzxt7i7v8FqtZpkslMZYy7MdE6CN10PUVb46PrpPJgRi+Utfjx8w8vrKzgRllU1PYzjwxZnQl3X4LqkhPGT6wkZZmV4Xq/w+PSIjesiy/OL7j4RprKAT872fX9OKMkkQUSe54ExNnVlEYYhjcyRE6mNz4mdk16Tw0qhbpozYUP7isaqqfs57J2FJg3tXzHpTKRSSvwDoqT+s56O2g8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/e863c139ace725bbb4b814cd09912823/8d3d1/jwt-auth-part-2-loige.webp 256w,\n/static/e863c139ace725bbb4b814cd09912823/354cf/jwt-auth-part-2-loige.webp 512w,\n/static/e863c139ace725bbb4b814cd09912823/44907/jwt-auth-part-2-loige.webp 1024w,\n/static/e863c139ace725bbb4b814cd09912823/04abd/jwt-auth-part-2-loige.webp 1315w\"\n          sizes=\"(max-width: 1024px) 100vw, 1024px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/e863c139ace725bbb4b814cd09912823/85b06/jwt-auth-part-2-loige.png 256w,\n/static/e863c139ace725bbb4b814cd09912823/bc282/jwt-auth-part-2-loige.png 512w,\n/static/e863c139ace725bbb4b814cd09912823/f1720/jwt-auth-part-2-loige.png 1024w,\n/static/e863c139ace725bbb4b814cd09912823/de2c1/jwt-auth-part-2-loige.png 1315w\"\n          sizes=\"(max-width: 1024px) 100vw, 1024px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/e863c139ace725bbb4b814cd09912823/f1720/jwt-auth-part-2-loige.png\"\n          alt=\"John using his JWT to communicate with the pizza service\"\n          title=\"John using his JWT to communicate with the pizza service\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n    </span></p>\n<p>In this picture:</p>\n<ol>\n<li>John is authenticating against an auth server. The auth server recognizes his credentials and gives him back a token</li>\n<li>John can now use the token to connect to specific services, for instance the pizza service.</li>\n</ol>\n<p>Every time John makes a request to a service, he will need to attach his token to the request. The service can look at the token to understand if the request can be authorized. The service can read the information embedded within the token to understand that the request is coming from John and can verify that the signature was applied by the Auth server.</p>\n<p>This process is ‚Äústateless‚Äù because this validation can be done without having to make an explicit request to the Auth server. Of course every service needs to know the Auth server public key to be able to validate the token signature.</p>\n<p>A stateless mechanism like this, is great for distributed systems or, in general, systems that deal with a high load of requests.</p>\n<p>Authentication is not the only use case for JWT. For instance a JWT can also be used to generate confirmation links like ‚Äúconfirm your subscription to this newsletter‚Äù or to generate ‚Äúpassword reset links‚Äù.</p>\n<h2 id=\"now-you-can-be-nosy\" style=\"position:relative;\"><a href=\"#now-you-can-be-nosy\" aria-label=\"now you can be nosy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Now you can be nosy</h2>\n<p>Now that you know how a JWT token is made you can start to be nosy and look into the JWT tokens you bump into.</p>\n<p>You can copy-paste tokens into <a href=\"https://jwt.io\">jwt.io</a> or use a command-line tool like <a href=\"https://github.com/lmammino/jwtinfo\"><code>jwtinfo</code></a> to read the content of the header and the body in plain text.</p>\n<p>Trust me, if you do that you will be surprised by how many interesting information you can find there!</p>\n<h2 id=\"closing-notes\" style=\"position:relative;\"><a href=\"#closing-notes\" aria-label=\"closing notes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Closing notes</h2>\n<p>JWT tokens are an interesting approach to authentication and they are particularly convenient in distributed systems when we want to minimise the communication and the amount of load to the authentication provider. Once a token is created, it can be validated without the need to call the authentication provider again.</p>\n<p>If you are curious to understand more about how JWT works (and even how you could crack tokens using Node.js üòº) check out this talk I gave a couple of years ago at <a href=\"https://buzzjs.com/\">BuzzJS 2018</a> in the beautiful New York City:</p>\n<div style=\"margin-top: 2em; position: relative; padding-bottom: 56.25%; height: 0; margin-bottom: 2em;\">\n<iframe style=\"position: absolute; top:0; left: 0; width: 100%; height: 100%;\" src=\"https://www.youtube.com/embed/uBYdxOQ57nQ\" frameborder=\"0\" allowfullscreen></iframe>\n</div>\n<p>While you watch that, you can have <a href=\"https://loige.link/jwt-crack-ny\">the slides</a> too! ü§ó</p>\n<p>That‚Äôs all for now.</p>\n<p>Thank you and see you on the next post! üëã</p>","frontmatter":{"title":"What's in a JWT (Json Web Token)?","slug":"whats-in-a-jwt","author":"Luciano Mammino","tags":["jwt"],"date":"October 05, 2020","header_img":{"publicURL":"/static/e1ddf227656e180d575bfdb9a494a9d2/whats-in-a-jwt.png"}}}},"pageContext":{"slug":"whats-in-a-jwt","width":1200,"height":630,"type":"facebook"}},"staticQueryHashes":[]}